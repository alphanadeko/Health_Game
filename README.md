# Health_Game
WebcamBased Health_Game (Not completed)


1. 과제 개요

  - 과제 설계 배경:
 코로나를 계기로 하여 비대면 프로그램들이 급작스럽게 생겨나기 시작했으며, 이 중에는 운동 보조 프로그램 역시 존재하였다.
 하지만 기존에 존재하는 운동 보조프로그램들은 대부분 추가적인 보조 도구가 필요했고, 이러한 보조도구의 가격 역시 적지 않았다.
 그나마 인기를 끌었던 건강 기능성 게임은 PC가 아닌 콘솔 플랫폼이었으며, 그 콘솔의 가격 역시 건강 기능성 게임 하나를 보고 사기엔 너무 가격이 높았다.
 그래서 PC플랫폼이면서 상대적으로 저렴한 보조 도구가 필요하다고 느꼈고, 이 또한 비대면 상황으로 인해 많이 보급된 웹캠을 활용할 수 있을 것이라 생각하였다.
   
   - 과제 주요내용:
  기능성 게임은 크게 게임적 요소에 기능적인 요소를 합한 것으로써, 게임적 요소를 잘 활용하기 위해선 게임적인 완성도가 필요하다.
 또한 웹캠 기반으로 하여 모션을 인식하고 이를 통해서 유저가 운동을 수행하고 있는지 파악할 필요가 있다.
 
   - 최종결과물의 목표:
 대중적으로 접근하기 쉬운 웹캠을 활용하여, 일반적으로 활용하는 센서들과 비교하여 정확도가 밀리지 않는 건강 기능성 게임을 제작하는 것을 목표로 한다.

2. 과제 수행 방법

먼저 기존의 기능성 게임들에 관한 연구들과 실제로 개발된 게임들, 개발 동향들을 포함한 기초 조사를 수행하였다.

또한 이를 기반으로 한 기능성 게임에 적합한 운동들에 대해 조사하고 이를 선별하였다. 이 후 핵심 게임 메커니즘, 세계관 등을 추가한 게임 디자인 기획서를 작성하였다.

완성된 게임 디자인 기획서를 기반으로 하여 언리얼 엔진 4를 통해서 게임의 핵심 기능들을 구현하였다. 

3. 과제 결과

*기초 조사

![image](https://user-images.githubusercontent.com/63720627/174283520-6c8780ff-3592-4a9d-8511-99ea0260f5ed.png)

기능성 게임은 게임이 가지는 몰입성을 기반으로 교육이나, 학습 등에 활용하여 만들어지는 게임을 말한다.
게임이 다른 목적들과 조합되어서 효율적으로 활용되는 가장 큰 이유 중 하나는 게임의 몰입성, 나아가 유저의 자발적인 동기 부여이다.
게임이라는 틀에 유저가 참여하게 만드는 가장 핵심적인 요소인 몰입성은 플레이하는 유저의 자발적인 참여를 유도하며,
이러한 자발적인 유도가 게임이 타 매체와 비교해서 가지는 가장 큰 특징이다.

기능성 게임을 개발함에 있어서 가장 중요히 여겨지는 것은 당연하게도, 만들어지는 게임의 ‘기능성’이다.
문제는 게임의 기능성에 너무 집중하다보면 게임의 타 몰입 요소에 대해 상대적으로 소홀해지고, 이는 게임의 몰입성에 악영향을 주게 된다.
이는 결국 게임의 매체로서의 장점인 자발적인 유도에 실패하게 된다.


운동을 하기 전에는 가벼운 준비 운동이 수행되어야 한다.
이 준비운동은 짧은 시간 동안 수행하여 운동 전에 몸을 푸는 효과와 운동 중 몸의 부담을 줄이는 역할을 한다.
또한 준비 운동으로 스트레칭을 제안하는데, 짧은 시간동안 하는 스트레칭은 위의 효과 뿐만 아니라, 지속적인 신체 교정에도 효과가 있다.

*기초 조사를 통한 게임의 핵심 메커니즘들

여러 가지 스트레칭을 제시하고 중 플레이하는 유저가 일부 선택하여 자발적으로 수행할 수 있도록 함. (최소 3개 이상 / 10초 - 30초 가량 유저의 재량 하에 유지 / 2회 반복)
이 과정에서 스트레칭의 지속 시간은 유저가 자신의 한계까지 하되, 근육에 통증을 느끼거나 하면 즉시 멈추어야 하고, 무리해서 시간을 늘려 운동하지 않도록 경고해야 한다.
또한 최고로 유의할 점은 반복성이 있는 동작을 할 때 반동을 주면서 더 자극을 주려고 하는 경우가 있는데,
이는 관절이 빠지거나 근육이 파열될 수도 있으니 이러한 동작을 할 때에는 추가로 경고를 해야 한다.

핵심 운동의 경우는  크게 3종류 (팔-푸시 업 / 복부 - 크런치 / 다리 - 스쿼트) 로 운동을 분류하며, 각각 게임 내에서 (근력 / 체력 / 기량) 운동에 대응한다.
{운동은 여러 가지가 있지만 일단 여기선 구현을 위해 각 하나씩 만 제시하였다.}

이 모든 운동은 웹캠을 통해서 받은 동작의 스켈레톤을 추출하여, 스켈레톤의 움직임을 통해서 동작이 정확하게 실행되고 있는지 확인하는 과정을 진행할 것이다.

![image](https://user-images.githubusercontent.com/63720627/174284495-8d27caca-a2e6-42a2-9ffb-36562e3be42a.png)
![image](https://user-images.githubusercontent.com/63720627/174284540-c83080ac-ef67-4e2a-bbb9-d5f56911c54f.png)
![image](https://user-images.githubusercontent.com/63720627/174284546-0d2356e0-3dc4-48c0-b17c-f80a2f174157.png)


게임적 메커니즘

사용자에게 동기 부여를 시키는 가장 큰 요인은 경쟁 요소이다. 이는 PvE의 방식으로도 구현할 수 있지만, PvP를 통해서 더욱 효과적으로 끌어낼 수 있다.
따라서 PvP를 포함한 RPG 형식의 게임을 생각하였다.
플레이어는 근력, 기량, 체력의 3가지의 스테이터스를 가지며, 운동을 통해서 이 스테이터스를 증가시킬 수 있다.
또한 지속적으로 유저의 동기를 부여하는 데에 있어서 페널티의 요소 역시 중요한데, 
이는 유저가 이틀 이상 운동을 수행하지 않을 시 플레이어의 스테이터스가 다시 천천히 감소하는 것으로 구현하였다.

![image](https://user-images.githubusercontent.com/63720627/174285497-52a9e17d-461c-4095-9f27-03c5cf95e57b.png)


플레이어가 활용할 수 있는 무기 종류 : 
 근력 기반 무기 : 직검(아밍 소드) / 대검 (롱소드 + 투 핸디드 소드)
 기량 기반 무기 : 도(타도 + 환도) / 자검 (레이피어)
 체력 기반 무기 : 소형 방패 (버클러 + 타지) / 대형 방패 (히터 실드)
속도 스텟 : 기본 0, 착용 중인 무기의 속도 수치 + 체력 10 당 속도 스텟 1을 추가로 획득
무기 별 속도 스텟 :
 직검 : +2 , 대검 : +1, 도 : +2 , 자검 : +3
 소형 방패 : +1, 대형 방패 : +0
턴제 전투 방식으로 플레이어는 각자의 속도 스텟 + 1d4를 통해서 누가 먼저 행동을 하는 지 결정한다.

 무기 숙련 시스템: 스텟을 올리는 운동과는 별개로 무기 숙련도를 올리는 운동을 최대 2회 할 수 있으며, 무기 숙련는 최대 50까지 올릴 수 있다. 무기 숙련도 관련 운동을 할 때 마다 1씩 숙련도가 1씩 증가하며, 이틀 연속으로 하지 않으면 2씩 매일 깎인다. 또한 그 무기를 사용하는데에 필요한 스텟이 부족해져서 사용할 수 없게 되어도 매일 2씩 깎인다.
 
무기 기술 : 무기의 숙련도가 일정 수치 이상이 되면 무기 특유의 기술을 습득 할 수 있다. 무기 기술을 습득하기 위해선, 정해진 기간동안 정해진 특정 운동을 하면 된다. 이 기간동안은 무기 숙련을 올리는 운동을 할 수 없으며, 무기 숙련치는 감소하지 않는다. 이 후 숙련도가 깎여서 기술을 얻기 위한 숙련도 이하가 되면 기술은 비활성화되나, 이후 숙련도를 다시 올리게 되면 기술 습득 운동을 다시 할 필요는 없다.

무기 기초 피해량 : 무기의 기초 피해량은 ‘무기의 기초 공격력 + 무기의 강화 효과량 + 무기의 숙련도’이다.

무기의 강화 : 원정 등을 통해서 단석(가칭)을 구할 수 있으며, 이를 통해서 무기를 강화할 수 있다. 모든 무기는 25강화까지 가능하며, 매 강화마다 필요한 단석의 양과 질은 증가한다.

 원정 : 원정은 매일 갈 수 있는 일일 원정과 매주 1회 갈 수 있는 주간 원정이 있다. 일일 원정은 짧은 탐색으로 구성되어 있다. 탐색 과정에서 강화 재료와 여러 보조 도구를 얻는 조우를 할 수 있으며, 전투 조우를 통해서 괴물들과 전투를 할 수도 있다.
 
주간 원정은 일일 원정의 약 2.5배 정도의 길이를 가지는 탐색으로써, 탐색의 마지막 조우는 반드시 중간 보스 급 이상의 강적이 등장한다. 강적을 쓰러트릴 시, 특수한 보조 도구나 특수한 무기를 만들 수 있는 재료를 얻을 수 있다.

탐색 진행 : 타일들을 이동해 가면서 조우를 진행하는 방식. 진행 루트는 직선형으로 분기 등은 고려하지 않음. 탐색 보조 도구등은 고려 중. 조우는 크게 전투 조우와 탐색 조우로 나누며, 전투 조우에는 적과 만나 전투를 하고, 승리하면 보상을 얻을 수 있고 패배 또는 도주 시 아무 보상을 얻을 수 없으며 탐색이 종료된다.

 보조 도구 : 탐색에서 활용할 수 있는 사용형 보조 도구와, 전투에서 활용할 수 있는 전투 보조도구로 나눔. 어느 쪽이든 탐색에서 얻을 수 있다.
 
승급 : 승급을 하면 더 높은 난이도의 원정을 도전할 수 있게 되며, 더 높은 레벨의 무기 강화를 할 수 있게 된다.

승급 방법 : 승급 4회 까지는 매주 기회를 얻을 수 있으며, 정해진 원정을 성공하면 승급을 하는 방식이다. 이 후로는 매일 1회 같은 등급의 타 유저들과 pvp를 할 수 있으며, 매 승리마다 승점을 얻을 수 있고, 이 승점이 일정 이상 쌓이면 다음 등급으로 승급할 수 있게 된다. 이 승점은 다음 등급으로 올라가기 전까지는 어떤 방식으로도 사라지지 않는다.

PVP : 승급과 관련된 pvp는 매일 1회만 가능하며, 승급과는 별개로 pvp는 횟수 제한 없이 진행할 수 있다.(이를 일반전이라 통칭) 일반전은 월 마지막 날에 정산하며, 승점이 일정 이상 쌓이면 특정 보조도구 나 장식 등을 보상으로 얻음.

최고 승급 : 최고 승급에 도달한 이후 3달이 지나면 최후의 던전에 탐색을 나갈 수 있으며, 탐색의 성공과는 관계없이 그 캐릭터는 사용할 수 없게 된다.
(이에 대한 경고는 함).
최후의 던전에 도전한 유저가 새로운 캐릭터를 만들 시, 성장치에서 많은 메리트를 얻으며 특수한 무기를 선택하여 획득한 상태로 시작하게 된다.
또한 최후의 던전에 탐색에 나간 캐릭터가 가진 장비를 제외한 다른 모든 장비는 계승된다.

게임의 몰입을 위한 세계관 역시 작성하였으나, 내용이 너무 장황해 질 것 같아서 기술하지는 않겠다.

*핵심 기능 구현

푸쉬 업

![image](https://user-images.githubusercontent.com/63720627/174285964-4d5656b4-7407-4aa6-98a1-3b16b885fd8b.png)
![image](https://user-images.githubusercontent.com/63720627/174285973-b97d2721-6f4c-4a5b-916a-e1f8b56a1411.png)

(상 : 올바른 자세 / 하 : 잘못된 자세)

팔의 각도 (3,4,5번 점의 각도), (7,8,9번 점의 각도) 가 제대로 굽혀지는가
다리의 각도 (10,11,12번 점의 각도), (13,14,15번 점의 각도)가 변화하지 않는가
를 통해서 자세를 구분하였다.

크런치

![image](https://user-images.githubusercontent.com/63720627/174286345-53a30904-89fc-48b0-8f9d-93a84cb04b7b.png)
![image](https://user-images.githubusercontent.com/63720627/174286360-25f55dab-05e5-4a25-8874-3fdf561354fc.png)

다리의 각도 (10,11,12번 점의 각도), (13,14,15번 점의 각도) 가 80~100도 사이를 유지하는가
다리 사이의 거리 (11,14번 점의 거리),(12,15번 점의 거리) 가 변화하지 않는가
등의 수평 여부 (2,9,10 - 목 가슴 엉덩이 점의 각도)(2,9,13) 가 변화하지 않는가
팔 사이 (4,7번 점의 거리)(5,8번 점의 거리)의 거리가 변화하지 않는가
를 통해서 자세를 구분하였다.

맨손 스쿼트

![image](https://user-images.githubusercontent.com/63720627/174286856-a4a48895-a86b-402f-85eb-c24ec34a96d7.png)
![image](https://user-images.githubusercontent.com/63720627/174286865-6181b0ac-d668-421e-9f13-9b1b9d4d92c2.png)

다리의 각도 (10,11,12번 점의 각도), (13,14,15번 점의 각도)가 변화하는가
팔의 각도(3,4,5번 점의 각도), (6,7,8번 점의 각도)가 변화하지 않는가
를 통해서 자세를 구분하였다.


결과물 다운로드 링크

DW Link : https://drive.google.com/file/d/1px18BCYAFhU_GbOp6FSNE4PjmU0djvjX/view?usp=sharing 에서 다운로드가 가능하다.

4. 활용 방안

싼 가격의 웹캠으로도 동작할 수 있는 건강 기능성 게임의 가능성을 보였다. 
이는 기능성 게임을 활용하는 데에 있어서 더 저렴한 가격에 활용할 수 있다면 이는 기능성 게임을 더 대중적으로 활용할 수 있게 될 수 있을 것이라 생각한다.

5. 결론 및 제언

 게임으로써 완전히 완성된 결과물은 아니었으나, 웹캠으로 운동을 인식한다는 결과는 만들어 내었다.
 핵심적인 메커니즘, 디자인 초안 등은 잡혀 있기에, 시간을 더 들여서 완성된 작품으로 완성할 수 있도록 해야 할 것이다. 
 또한 언리얼 엔진을 기반으로 하여 제작하였는데, 
 유니티 엔진으로 만드는 것이 더 적합하다고 생각돼어, 
 추후 더 공부하여 유니티 엔진을 기반으로 더 효과적으로 구현해 나아갈 예정이다.

6. 개선 목표

맨손 스쿼트 동작에 있어서 더 정확하게 인식할 수 있는 각도를 추가로 생각해야 한다. (정면 각도로는 등이 굽어있는지 알기가 어려웟음)


7. 참고문헌

1] 우탁,안계윤,윤수진.2011.기능성게임의 새로운 가능성
[2] 임충재.2011.기능성 게임의 현황, 개발 사례와 전망.
[3] 김경,한진태,유재응.2008슬괵근 스트레칭 운동방법이 성인의 허리 유연성 증가에 미치는 영향-한국운동생리학회지
[4] 미국 스포츠의학회(ASCM) 가이드라인
